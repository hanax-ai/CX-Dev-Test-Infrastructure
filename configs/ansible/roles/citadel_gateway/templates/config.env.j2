# Generated by Ansible

# ===================================================
# Core Gateway Configuration (Active)
# ===================================================
GATEWAY_HOST=0.0.0.0
GATEWAY_PORT={{ gateway_port }}
LOG_LEVEL={{ log_level }}
CORS_ORIGINS={{ cors_origins }}

# ===================================================
# Backend Node Definitions (Used by config helpers)
# ===================================================
{% set index = 1 %}
{% for node in ollama_nodes %}
OLLAMA_NODE_{{ index }}_NAME={{ node.name }}
OLLAMA_NODE_{{ index }}_HOST={{ node.host }}
OLLAMA_NODE_{{ index }}_PORT={{ node.port }}
{% set index = index + 1 %}
{% endfor %}

# ===================================================
# Explicit Model Routing Map (Active & Required)
# ===================================================
{% for model, node in model_mappings.items() %}
{% if model == "default" %}
MODEL_MAP_DEFAULT={{ node }}
{% else %}
{% set key = model.upper().replace(':', '_').replace('.', '_').replace('-', '_') %}
MODEL_MAP_{{ key }}={{ node }}
MODEL_ID_{{ key }}={{ model }}
{% endif %}
{% endfor %}

# ====================================================================
# Future / Unused Configuration
# Note: The settings below are placeholders and are not used by the
# current version of the gateway application.
# ====================================================================
TRUSTED_SUBNET={{ trusted_subnet | default('192.168.10.0/24') }}
ROUTING_STRATEGY=model_based
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
REQUEST_TIMEOUT=300
MAX_CONCURRENT_REQUESTS=50
LOG_REQUESTS=true
LOG_RESPONSES=false
LOG_MODEL_ROUTING=true
LOG_DIR={{ log_dir }}
MODEL_MAP_VERBOSE={{ model_map_verbose }}
ENABLE_FAILOVER=true
MAX_RETRIES=2
RETRY_DELAY=1.0